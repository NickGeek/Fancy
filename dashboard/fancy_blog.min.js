/*! Includes Fancy Bloggifier | See LICENSE file */
/*! Includes: jQuery v3.1.1 | (c) jQuery Foundation | jquery.org/license */
function httpCheck(e){return"Not enough data has been sent"===e?(alert("Not enough data has been sent"),!1):"Authentication Error"===e?(window.location.href="login.html",!1):"Fancy has not been setup"!==e?"Feature not in API"!==e||(alert("The version of the Fancy API that you are using does not support this feature"),!1):(alert("Fancy has not been setup"),void(window.location.href="setup.html"))}function reqGET(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&t(n.responseText,n.status)},n.open("GET",e,!0),n.setRequestHeader("Cache-Control","max-age=0"),n.send()}function fail(){alert("There was an error contacting the server. Please check your Internet connection.")}function displayPost(e,t){t.innerHTML=document.querySelector('[ftemplate="post"]').innerHTML,t.querySelector('[ftemplate="title"]').innerHTML=e.title,t.querySelector('[ftemplate="timestamp"]').innerHTML=e.timestamp,t.querySelector('[ftemplate="content"]').innerHTML=e.html}String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return void 0!==e[n]?e[n]:t})});var get=function(){function e(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))}var t=window.location.search.substr(1);return null!=t&&""!=t?function(t){for(var n={},o=t.split("&"),r=0;r<o.length;r++){var a=o[r].split("=");n[a[0]]=e(a[1])}return n}(t):{}}();document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector('[ftemplate="container"]');document.querySelector('[ftemplate="post"]').style.display="none",document.querySelector('[ftemplate="comments"]').style.display="none",get.view?(document.querySelector('[ftemplate="comments"]').style.display="inherit",reqGET("{0}{1}?fancy_getPost={2}".format(document.location.origin,document.location.pathname,get.view),function(t,n){if(200!==n)return fail();if(httpCheck(t)){var o=JSON.parse(t);e.innerHTML+='<article id="post{0}" class="fancy-post"></article>'.format(o.id),displayPost(o,document.getElementById("post"+o.id))}})):reqGET("{0}{1}?fancy_getPosts=1".format(document.location.origin,document.location.pathname),function(t,n){if(200!==n)return fail();if(httpCheck(t))for(var o=JSON.parse(t),r=o.length-1;r>=0;r--){var a=o[r];a.html='{0}&hellip; <a href="?view={1}">Read More >></a></p>'.format(a.html.split("</p>")[0],a.id),e.innerHTML+='<article id="post{0}" class="fancy-post"></article>'.format(a.id),displayPost(a,document.getElementById("post"+a.id))}})});